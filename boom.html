<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>رابط سفارش</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/moment-jalaali/dist/moment-jalaali.js"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      background-color: #f9f9f9;
      color: #333;
      direction: rtl;
      text-align: right;
    }

    .container {
      max-width: 900px;
      margin: 20px auto;
      padding: 20px;
      border-radius: 16px;
      background-color: #ffffff;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .header input {
      width: 30%;
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .menu .column {
      border: none;
      margin-bottom: 20px;
    }

    .menu .column h2 {
      margin: 0;
      padding: 12px;
      background: #00b4d8;
      color: white;
      text-align: center;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .menu .items {
      display: none;
      flex-wrap: wrap;
      justify-content: center;
      padding: 10px;
    }

    .menu .item {
      width: 100px;
      height: 100px;
      margin: 10px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      background-color: #caf0f8;
      transition: transform 0.2s, background-color 0.2s;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .menu .item:hover {
      transform: scale(1.1);
      background-color: #ade8f4;
    }

    .menu .item span:first-child {
      font-weight: bold;
    }

    .summary {
      width: 100%;
      border-radius: 12px;
      padding: 10px;
      margin-bottom: 20px;
      background-color: #e9f5ff;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .summary ul {
      padding-left: 0;
      list-style: none;
    }

    .summary li {
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .summary li button {
      background-color: #f94144;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .summary li button:hover {
      background-color: #d90429;
    }

    .buttons button {
      padding: 12px 20px;
      font-size: 16px;
      margin-left: 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: #00b4d8;
      color: white;
      transition: background-color 0.2s;
    }

    .buttons button:hover {
      background-color: #0096c7;
    }

    .payment-methods {
      margin-bottom: 20px;
      padding: 10px;
      border-radius: 12px;
      background-color: #e9f5ff;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .payment-methods label {
      margin-right: 10px;
    }

    .payment-methods input {
      margin-right: 5px;
    }

    .split-payment {
      display: none;
      margin-top: 10px;
    }

    .split-payment input {
      margin-right: 5px;
      width: 100px;
      padding: 5px;
      border: 1px solid #ddd;
      border-radius: 6px;
    }

    .receipt {
      display: none;
      width: 300px;
      padding: 15px;
      border: 1px solid #ddd;
      margin: 20px auto;
      background-color: #fff;
      font-size: 14px;
      direction: rtl;
      text-align: right;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .receipt-header {
      text-align: center;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .receipt ul {
      padding: 0;
      list-style: none;
    }

    .receipt ul li {
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
    }

    .receipt-date {
      text-align: center;
      margin-top: 10px;
      font-size: 12px;
      color: #555;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header d-flex justify-content-between mb-4">
      <input type="text" placeholder="نام مشتری" id="customerName">
      <input type="text" placeholder="نوع مشتری" id="customerType">
      <input type="text" placeholder="شماره میز" id="tableNumber">
    </div>

    <div class="menu">
      <div class="column">
        <h2 onclick="toggleItems('foodItems')">غذا</h2>
        <div class="items" id="foodItems">
          <div class="item" onclick="addToOrder('غذای 1', 10000)">
            <span>غذای 1</span>
            <span>10,000 ریال</span>
          </div>
          <div class="item" onclick="addToOrder('غذای 2', 15000)">
            <span>غذای 2</span>
            <span>15,000 ریال</span>
          </div>
          <div class="item" onclick="addToOrder('غذای 3', 20000)">
            <span>غذای 3</span>
            <span>20,000 ریال</span>
          </div>
          <div class="item" onclick="addToOrder('غذای 4', 12000)">
            <span>غذای 4</span>
            <span>12,000 ریال</span>
          </div>
        </div>
      </div>

      <div class="column">
        <h2 onclick="toggleItems('drinkItems')">نوشیدنی</h2>
        <div class="items" id="drinkItems">
          <div class="item" onclick="addToOrder('نوشیدنی 1', 5000)">
            <span>نوشیدنی 1</span>
            <span>5,000 ریال</span>
          </div>
          <div class="item" onclick="addToOrder('نوشیدنی 2', 8000)">
            <span>نوشیدنی 2</span>
            <span>8,000 ریال</span>
          </div>
          <div class="item" onclick="addToOrder('نوشیدنی 3', 7000)">
            <span>نوشیدنی 3</span>
            <span>7,000 ریال</span>
          </div>
          <div class="item" onclick="addToOrder('نوشیدنی 4', 6000)">
            <span>نوشیدنی 4</span>
            <span>6,000 ریال</span>
          </div>
        </div>
      </div>
    </div>

    <div class="summary" id="summary">
      <h3>خلاصه سفارش:</h3>
      <ul id="orderList"></ul>
      <h4>جمع کل: <span id="totalAmount">0</span> ریال</h4>
    </div>

    <div class="payment-methods">
      <h4>روش پرداخت:</h4>
      <div>
        <input type="radio" id="cash" name="payment" value="cash" onclick="setPaymentMethod('cash')">
        <label for="cash">نقدی</label>
        <input type="radio" id="card" name="payment" value="card" onclick="setPaymentMethod('card')">
        <label for="card">کارت</label>
        <input type="radio" id="split" name="payment" value="split" onclick="setPaymentMethod('split')">
        <label for="split">نصف نقدی / نصف کارت</label>
      </div>
      <div class="split-payment" id="splitPayment">
        <label>مبلغ نقدی:</label>
        <input type="number" id="cashAmount" oninput="updateSplitPayment()">
        <label>مبلغ کارت:</label>
        <input type="number" id="cardAmount" oninput="updateSplitPayment()">
      </div>
    </div>

    <div class="buttons">
      <button onclick="resetOrder()">بازنشانی</button>
      <button onclick="placeOrder()" id="placeOrderButton">ثبت سفارش</button>
    </div>
  </div>

  <div class="receipt" id="receipt">
    <div class="receipt-header">بومگردی بام بوژان</div>
    <ul id="receiptItems"></ul>
    <h4>جمع کل: <span id="receiptTotal">0</span> ریال</h4>
    <div class="receipt-date" id="receiptDate"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let order = [];
    let totalAmount = 0;
    let paymentMethod = null;

    function toggleItems(id) {
      const items = document.getElementById(id);
      items.style.display = items.style.display === 'flex' ? 'none' : 'flex';
    }

    function addToOrder(item, price) {
      order.push({ item, price });
      totalAmount += price;
      updateSummary();
    }

    function removeFromOrder(index) {
      totalAmount -= order[index].price;
      order.splice(index, 1);
      updateSummary();
    }

    function formatCurrency(amount) {
      return amount.toLocaleString('fa-IR');
    }

    function updateSummary() {
      const orderList = document.getElementById('orderList');
      const totalAmountElement = document.getElementById('totalAmount');

      orderList.innerHTML = '';
      order.forEach((entry, index) => {
        const listItem = document.createElement('li');
        listItem.innerHTML = `${entry.item} - ${formatCurrency(entry.price)} ریال <button onclick="removeFromOrder(${index})">حذف</button>`;
        listItem.style.marginBottom = '10px';
        orderList.appendChild(listItem);
      });

      totalAmountElement.textContent = formatCurrency(totalAmount);
      checkPaymentStatus();
    }

    function setPaymentMethod(method) {
      paymentMethod = method;
      const splitPaymentDiv = document.getElementById('splitPayment');
      if (method === 'split') {
        splitPaymentDiv.style.display = 'block';
      } else {
        splitPaymentDiv.style.display = 'none';
      }
      checkPaymentStatus();
    }

    function updateSplitPayment() {
      const cashAmount = parseFloat(document.getElementById('cashAmount').value) || 0;
      const cardAmount = parseFloat(document.getElementById('cardAmount').value) || 0;

      if (cashAmount + cardAmount === totalAmount) {
        document.getElementById('placeOrderButton').disabled = false;
      } else {
        document.getElementById('placeOrderButton').disabled = true;
      }
    }

    function checkPaymentStatus() {
      const placeOrderButton = document.getElementById('placeOrderButton');
      if (paymentMethod === 'split') {
        updateSplitPayment();
      } else if (paymentMethod && totalAmount > 0) {
        placeOrderButton.disabled = false;
      } else {
        placeOrderButton.disabled = true;
      }
    }

    function resetOrder() {
      order = [];
      totalAmount = 0;
      paymentMethod = null;
      document.querySelectorAll('input[name="payment"]').forEach(input => input.checked = false);
      document.getElementById('cashAmount').value = '';
      document.getElementById('cardAmount').value = '';
      updateSummary();
      document.getElementById('customerName').value = '';
      document.getElementById('customerType').value = '';
      document.getElementById('tableNumber').value = '';
      document.getElementById('foodItems').style.display = 'none';
      document.getElementById('drinkItems').style.display = 'none';
      document.getElementById('splitPayment').style.display = 'none';
    }

    function placeOrder() {
      if (!paymentMethod) {
        alert('لطفاً روش پرداخت را انتخاب کنید.');
        return;
      }

      if (paymentMethod === 'split') {
        const cashAmount = parseFloat(document.getElementById('cashAmount').value) || 0;
        const cardAmount = parseFloat(document.getElementById('cardAmount').value) || 0;

        if (cashAmount + cardAmount !== totalAmount) {
          alert('مبالغ نقدی و کارت باید برابر با مبلغ کل باشد.');
          return;
        }
      }

      const receipt = document.getElementById('receipt');
      const receiptItems = document.getElementById('receiptItems');
      const receiptTotal = document.getElementById('receiptTotal');
      const receiptDate = document.getElementById('receiptDate');

      receiptItems.innerHTML = '';
      order.forEach(entry => {
        const listItem = document.createElement('li');
        listItem.innerHTML = `<span>${entry.item}</span><span>${formatCurrency(entry.price)} ریال</span>`;
        receiptItems.appendChild(listItem);
      });

      receiptTotal.textContent = formatCurrency(totalAmount);
      receiptDate.textContent = `تاریخ و زمان: ${moment().format('jYYYY/jM/jD HH:mm:ss')}`;
      receipt.style.display = 'block';

      resetOrder();
    }
  </script>
</body>
</html>
